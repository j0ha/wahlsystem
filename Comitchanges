@extends('layouts.app')

@section('content')

@livewire('CreateElection')

<div class="card-body">
  <form wire:submit.prevent="submit">
    @csrf

  <!-- Name der Wahl -->
  @if($step == 0)
  <div class="form-group">
    <label for="electionName">Name</label>
    <input type="text" class="form-control" wire:model.lazy="name" name="electionName" aria-describedby="electionNameHelp" placeholder="Enter Electionname">
    <small id="electionnamehelp" class="form-text text-muted">The Name of your Election should fit well.</small>
  </div>

  <!-- Beschreibung / Fragestellung  -->

  <div class="form-group">
    <label for="description">Description</label>
    <input type="text" class="form-control" wire:model.lazy="description" name="electionDescription" aria-describedby="electionDescriptionHelp" placeholder="Type in the Description of the Election.">
    <small id="electionDescriptionHelp" class="form-text text-muted">Type in whether the questioning or the problematic of the topic that the election is dealing with.</small>
  </div>
@endif
 <!-- Wahltyp -->
@if($step == 1)
  <div class="form-group">
   <label for="electionMode">Select the Electionmode</label>
   <select class="form-control" wire:model.lazy="mode" name="electionMode">
     @foreach ($modes as $mode)
      <option value=" {{ $mode->id }} "> {{$mode->name}} </option>
     @endforeach
   </select>
   <small id="electionnamehelp" class="form-text text-muted">The mode decides wheter the elector can abstain inside of your election or not.</small>
 </div>
@endif
@if($step > 0 && $step <= 2)
  <!-- Submit Button -->
  <button type="button" wire:click="decrease" class="btn btn-primary">Backwards</button>
@endif
@if($step <= 2)
  <!-- Submit Button -->
  <button type="submit" class="btn btn-primary">Next</button>
@endif


</form>
</div>

@endsection









<?php

namespace App\Http\Livewire;

use Livewire\Component;

class CreateElection extends Component
{

  public $name;
  public $description;
  public $mode;

  public $step;


  private $stepActions = [
    'submit1',
    'submit2',
    'submit3',
  ];

  public function mount(){
    $this->step = 0;
  }

  public function decrease(){
    $this->step = $step--;
  }

  public function render(){
        return view('createElection');
  }

  public function submit(){
    $action = $this->stepActions[$this->step];
    $this->$action();
  }

  public function submit1(){
    $this->validate([
      '' => '',
    ]);

    $this->step++;
  }

  public function submit2(){
    $this->validate([
      '' => '',
    ]);
    $this->step++;
  }

  public function submit3(){
    $this->validate([
      '' => '',
    ]);
    $this->step++;
  }
}



$modes = Mode::all();

return view('createElection')->withModes($modes);




Schema::create('modes', function (Blueprint $table) {
    $table->id();
    $table->char('mode');
    $table->string('name');
});




DB::table('modes')->insert([
    'mode' => 'ssw',
    'name' => 'Schülersprecherwahl',
]);
DB::table('modes')->insert([
    'mode' => 'token',
    'name' => 'Tokenwahl',
]);
DB::table('modes')->insert([
    'mode' => 'bw',
    'name' => 'Bürgerschaftswahl',
]);
